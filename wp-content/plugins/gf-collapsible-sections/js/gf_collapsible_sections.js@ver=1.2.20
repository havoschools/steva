var collapsibleSections=collapsibleSections||{};!function(e){collapsibleSections.cssClasses={open:"collapsible-sections-open"},collapsibleSections.getFormMarkupVersion=function(s){var o,i,l="";return void 0===s||"string"==typeof s&&""===s||"number"==typeof s&&s<=0?(o=e('form[id^="gform_"]:first').attr("id"),l=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),i=e("#"+o)):s instanceof jQuery?(o=s.attr("id"),l=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(o):o.replace("gform_",""),i=s):"string"==typeof s&&-1!==s.indexOf("gform_")?(l=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id(s):s.replace("gform_",""),i=e("#"+(o="gform_"+l))):(l=window.hasOwnProperty("gf_get_form_id_by_html_id")?window.gf_get_form_id_by_html_id("gform_"+s.toString()):s.toString(),i=e("#"+(o="gform_"+l))),i.length?i.find(".gform_body .gfield:first").is("li")?1:2:e(".gform_body .gfield:first").is("li")?1:2},collapsibleSections.isLegacyMarkup=function(e){return 1===collapsibleSections.getFormMarkupVersion(e)},collapsibleSections.isLegacyMode=function(){return!(collapsibleSectionsVars.hasOwnProperty("useNewFeatures")&&"true"===collapsibleSectionsVars.useNewFeatures.toString())},collapsibleSections.openAndFocusInput=function(e,s){if(e.hasClass("collapsible-sections-field")){"previous"!==s&&(s="next"),e.hasClass(collapsibleSections.cssClasses.open)?collapsibleSections.scrollTo(e):e.trigger("click");var o=e.closest("form");if(!(void 0!==o.data("ignore-scroll")&&!0===o.data("ignore-scroll"))){var i="previous"===s?":last-of-type":":first",l=e.next(".collapsible-sections-collapsible-body").find(".gfield"+i+" .ginput_container");l.find("> input").length?l.find("> input:first").focus():l.find("> textarea").length?l.find("> textarea:first").focus():l.find("> select").length?l.find("> select:first").focus():l.hasClass("ginput_complex")?l.find("> span"+i+" > input:first").focus():(l.hasClass("ginput_container_checkbox")||l.hasClass("ginput_container_radio"))&&l.find("> ul > li"+i+" > input:first").focus()}}},window.collapsibleSections_openAndFocusInput=collapsibleSections.openAndFocusInput,collapsibleSections.scrollTo=function(s){var o=e(s);if(!o.length)return!1;var i=o.closest("form"),l=o.closest(".gform_wrapper").attr("id").replace("gform_wrapper_","");if(!0===(void 0!==i.data("ignore-scroll")&&!0===i.data("ignore-scroll")))return!1;var t=window.hasOwnProperty("gf_collapsible_sections_scroll_to_offset_"+l)?window["gf_collapsible_sections_scroll_to_offset_"+l]:0,n=window.hasOwnProperty("gf_collapsible_sections_scroll_to_duration_"+l)?window["gf_collapsible_sections_scroll_to_duration_"+l]:400,c=o.offset().top-t;e("html,body").animate({scrollTop:c},n)},window.collapsibleSections_Scrollto=collapsibleSections.scrollTo,collapsibleSections.onSectionKeyPress=function(s){if("Enter"===s.key||" "===s.key){var o=e(s.target);o.hasClass("collapsible-sections-field")&&(s.preventDefault(),o.trigger("click"))}},collapsibleSections.onSectionFocus=function(s){e(document).on("keypress",collapsibleSections.onSectionKeyPress)},collapsibleSections.onSectionBlur=function(s){e(document).off("keypress",collapsibleSections.onSectionKeyPress)},collapsibleSections.setup=function(s,o,i){var l=e("#gform_wrapper_"+s),t=l.find(".collapsible-sections-field");if(t.length){if((r=l.find("form")).length||(r=l.closest("form")),r.length&&(!r.attr("class")||-1===r.attr("class").indexOf("collapsible-sections"))){var n=[];l.attr("class").split(" ").forEach((function(e){""===e.trim()||-1===e.indexOf("cs-theme--")&&-1===e.indexOf("collapsible-sections")||n.push(e.trim().replace("_wrapper",""))})),r.addClass(n.join(" "))}if(t.each((function(s,o){var i=e(this),l=i.next(".collapsible-sections-collapsible-body");if(!l.length)return!0;0===s?i.addClass("collapsible-sections-start-field"):s===t.length-1&&i.addClass("collapsible-sections-end-field");var n=l.nextUntil(".collapsible-sections-field"),c=l.nextUntil(".collapsible-sections-end-field"),a=n.length>c.length?c:n;if(a.detach(),i.hasClass("collapsible-sections-description-inside")){var r=i.find(".gsection_description");r.length&&r.detach().appendTo(l)}l.append(a),i.on("focus",collapsibleSections.onSectionFocus),i.on("blur",collapsibleSections.onSectionBlur)})),l.hasClass("collapsible-sections-footer-inside_last_wrapper")){var c=l.find(".collapsible-sections-collapsible-body:last");l.find(".gform_footer").detach().appendTo(c)}l.hasClass("collapsible-sections-single-opens_wrapper")&&l.find(".collapsible-sections-field:not(.collapsible-sections-open):not(.collapsible-sections-end-field-hidden)").each((function(){e(this).next(".collapsible-sections-collapsible-body").hide()}));var a=l.find(".gfield_error");if(a.length){var r,p=void 0!==(r=t.closest("form")).data("ignore-scroll")&&!0===r.data("ignore-scroll");r.data("ignore-scroll",!0);var f=window.hasOwnProperty("gf_collapsible_sections_scroll_to_duration_"+i)?window["gf_collapsible_sections_scroll_to_duration_"+i]:400;setTimeout((function(){r.data("ignore-scroll",p)}),f+=100),a.each((function(){e(this).closest(".collapsible-sections-collapsible-body").prev(".collapsible-sections-field").addClass("collapsible-sections-section-error")}));var d=l.find(".collapsible-sections-section-error"),_=l.find(".collapsible-sections-open");l.hasClass("collapsible-sections-single-opens_wrapper")&&d.length?(_.length&&!_.first().hasClass("collapsible-sections-section-error")&&_.first().trigger("click"),d.first().hasClass("collapsible-sections-open")||d.first().trigger("click")):!l.hasClass("collapsible-sections-single-opens_wrapper")&&d.length&&(_.each((function(){var s=e(this);s.hasClass("collapsible-sections-section-error")||s.trigger("click")})),d.each((function(){var s=e(this);s.hasClass(collapsibleSections.cssClasses.open)||s.trigger("click")})))}}},collapsibleSections.refreshMCE=function(){"undefined"!=typeof tinymce&&e(".collapsible-sections-collapsible-body textarea.wp-editor-area").each((function(){var s=tinymce.get(e(this).attr("id"));if(s){var o=e.extend({},s.settings);s.remove(),tinymce.init(o)}}))};var s=!1;collapsibleSections.conditionalLogicListener=function(){s||(e(document).on("gform_post_conditional_logic",(function(s,o,i,l){e(".gform_wrapper:not(.collapsible-sections-single-opens_wrapper) .collapsible-sections-field.collapsible-sections-open:hidden").each((function(){var s=e(this);s.removeClass(collapsibleSections.cssClasses.open),s.next(".collapsible-sections-collapsible-body:visible").hide()})),e(".collapsible-sections-open-by-default:visible").each((function(){var s=e(this);!0!==s.data("collapsible-closed")&&s.next(".collapsible-sections-collapsible-body").is(":hidden")&&collapsibleSections.openAndFocusInput(s)}));var t=e("#gform_"+o).find(".gfield_signature_container");t.length&&"function"==typeof gformSignatureResize&&t.each((function(){var s=e(this);setTimeout((function(){gformSignatureResize(s)}),200)}))})),s=!0)},collapsibleSections.getFormById=function(s){var o=e("#gform_"+s);return!o.length&&e('.gform_wrapper[class*="_original_id_'+s+'"]').length&&(o=e('.gform_wrapper[class*="_original_id_'+s+'"] form')),o},collapsibleSections.init=function(s,o){var i=collapsibleSections.getFormById(s);i.length&&i.each((function(){var i=e(this),l=i.attr("id").replace("gform_",""),t=e(".gfield_signature_container").length?1e3:10;if(void 0!==window.collapsibleSections_setupDelay){var n=parseInt(window.collapsibleSections_setupDelay,10);isNaN(n)||(t=1e3*n)}var c=!window.hasOwnProperty("gf_collapsible_sections_scroll_to_"+s)||"false"===window["gf_collapsible_sections_scroll_to_"+s]||!1===window["gf_collapsible_sections_scroll_to_"+s];i.data("ignore-scroll",c),setTimeout((function(){collapsibleSections.setup(l,o,s),console.log("collapsibleSections.setup",l),setTimeout((function(){collapsibleSections.refreshMCE(),e(document).trigger("gform_post_conditional_logic",[s,null,!0]),e(window).resize(),collapsibleSections.conditionalLogicListener(),e(document).trigger("gform_post_conditional_logic",[s,null,!0]),e(document).trigger("gf_collapsible_sections_setup",[s,o,l]),gform.doAction("gf_collapsible_sections_setup",s,o,l)}),100)}),t)}))};var o={};e(document).bind("gform_post_render",(function(e,s,i){var l=collapsibleSections.getFormById(s);if(l.length||o.hasOwnProperty(s.toString()))l.length&&collapsibleSections.init(s,i);else{var t=3e3;if(void 0!==window.collapsibleSections_renderDelay){var n=parseInt(window.collapsibleSections_renderDelay,10);isNaN(n)||(t=1e3*n)}console.log("renderDelay",t),o[s.toString()]=setTimeout((function(){collapsibleSections.init(s,i)}),t)}})),e(document).ready((function(){e("body").on("click",".collapsible-sections-field",(function(s){s.preventDefault();var o=e(this),i=o.closest(".gform_wrapper"),l=i.find("form");l.length||(l=i.closest("form"));var t=l.attr("id").replace("gform_","");if(-1!==i.attr("class").indexOf("original_id_")){var n=i.attr("class").split(" ").filter((function(e){return-1!==e.indexOf("original_id_")}))[0];t=n.substring(n.lastIndexOf("_")+1)}var c=o.data("target"),a=i.find(c);a.length&&(a.is(":visible")?(o.attr("aria-pressed","false").attr("aria-expanded","false"),o.data("collapsible-closed",!0),a.slideUp("fast",(function(){o.removeClass(collapsibleSections.cssClasses.open)}))):(i.length&&i.hasClass("collapsible-sections-single-opens_wrapper")&&i.find(".collapsible-sections-field:visible").not(o).each((function(){var s=e(this),o=s.data("target"),l=i.find(o);l.length&&(s.attr("aria-pressed","false").attr("aria-expanded","false"),l.slideUp("fast",(function(){s.removeClass(collapsibleSections.cssClasses.open)})))})),o.addClass(collapsibleSections.cssClasses.open),o.attr("aria-pressed","true").attr("aria-expanded","true"),o.data("collapsible-closed",!1),a.slideDown("fast",(function(){e(document).trigger("gform_post_conditional_logic",[t,null,!0]),e(window).resize(),i.hasClass("collapsible-sections-scrollto_wrapper")&&collapsibleSections.scrollTo(o)}))))}))}))}(jQuery);
//# sourceMappingURL=gf_collapsible_sections.js.map
